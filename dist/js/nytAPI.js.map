{"version":3,"sources":["nytAPI.js"],"names":["NYT_SearcherAPI","str","dateRegex","dateParts","match","console","log","curYY","Date","getFullYear","dateStr","year","length","month","day","evt","preventDefault","term","document","querySelector","value","beginDate","reformatDate","endDate","data","q","begin_date","end_date","API_KEY","axios","get","API_BASE_URL","params","then","processResults","current_ArtIndex","response","responseData","docs","displayResults","resultsPage","resImage","head","artAuthor","artPostDate","leadP","artUrl","style","display","src","multimedia","url","innerHTML","headline","main","byline","original","pub_date","abstract","lead_paragraph","href","web_url","setupListener","form","addEventListener","handleSearch","nextBtn","prevBtn","nextArticle","prevArticle"],"mappings":"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","sourcesContent":["class NYT_SearcherAPI {\r\n    API_BASE_URL = 'https://api.nytimes.com/svc/search/v2/articlesearch.json'\r\n    API_KEY = 'jrA8G275AjGzAGjYOplvFFkZxIsEXHKG'\r\n\r\n    current_ArtIndex = null\r\n\r\n    constructor() {\r\n        this.current_ArtIndex = 0\r\n        \r\n\r\n\r\n        this.setupListener()\r\n    }\r\n\r\n    setupListener() {\r\n        const form = document.querySelector('form[name=\"article_search\"]')\r\n        form.addEventListener('submit', this.handleSearch)\r\n\r\n        const nextBtn = document.querySelector('.next_btn')\r\n        const prevBtn = document.querySelector('.prev_btn')\r\n\r\n        nextBtn.addEventListener('click', this.nextArticle)\r\n        prevBtn.addEventListener('click', this.prevArticle)\r\n    }\r\n\r\n\r\n    reformatDate = (str) =>{\r\n        let dateRegex = /(\\d{1,2})\\/(\\d{1,2})\\/?(\\d{2,4})?/\r\n        let dateParts = str.match(dateRegex)\r\n        console.log('reformatDate', str, dateParts, dateRegex)\r\n\r\n        let curYY = (new Date()).getFullYear()\r\n        let dateStr = ''\r\n        let year = dateParts[3]\r\n        if (!year) {\r\n            year = curYY\r\n        } else if (year.length == 2) {\r\n            year = \"20\" + year\r\n        }\r\n        let month = dateParts[1]\r\n        if (month.length == 1) {\r\n            month = \"0\" + month\r\n        }\r\n        let day = dateParts[2]\r\n        if (day.length == 1) {\r\n            day = \"0\" + day\r\n        }\r\n\r\n        dateStr = `${year}`\r\n        console.log('reformated', dateStr)\r\n\r\n        return dateStr\r\n    }\r\n\r\n    handleSearch = (evt) => {\r\n        evt.preventDefault()\r\n        console.log('searching....')\r\n\r\n        const term = document.querySelector('input[name=\"term\"]').value\r\n        const beginDate = this.reformatDate(document.querySelector('input[name=\"begin_date\"]').value)\r\n        const endDate = this.reformatDate(document.querySelector('input[name=\"end_date\"]').value)\r\n        const data = {\r\n            q: term,\r\n            begin_date: beginDate,\r\n            end_date: endDate,\r\n            'api-key': this.API_KEY\r\n        }\r\n        // axios.request({\r\n        //     url: this.API_BASE_URL,\r\n        //     params: data\r\n        // }, this.processResults)\r\n        axios.get(this.API_BASE_URL, { params: data }).then(this.processResults)\r\n    }\r\n\r\n    nextArticle = (evt) => {\r\n        evt.preventDefault()\r\n        this.current_ArtIndex ++\r\n        const term = document.querySelector('input[name=\"term\"]').value\r\n        const data = {\r\n            q: term,\r\n            'api-key': this.API_KEY\r\n        }\r\n        axios.get(this.API_BASE_URL, { params: data }).then(this.processResults)\r\n    }\r\n    prevArticle = (evt) => {\r\n        evt.preventDefault()\r\n        this.current_ArtIndex --\r\n        const term = document.querySelector('input[name=\"term\"]').value\r\n        const data = {\r\n            q: term,\r\n            'api-key': this.API_KEY\r\n        }\r\n        axios.get(this.API_BASE_URL, { params: data }).then(this.processResults)\r\n    }\r\n\r\n    \r\n    processResults = (response) => {\r\n        console.log('your results captain: ', response)\r\n        let responseData = response.data.response.docs\r\n\r\n        \r\n    \r\n\r\n        const displayResults = () => {\r\n            let resultsPage = document.querySelector('.results')\r\n            let resImage = document.querySelector('.result_image')\r\n            let head = document.querySelector('.headline')\r\n            let artAuthor = document.querySelector('.article_author')\r\n            let artPostDate = document.querySelector('.article_postDate')\r\n            let leadP = document.querySelector('.lead_paragraph')\r\n            let artUrl = document.querySelector('.article_url')\r\n            resImage.style.display = 'block'\r\n            resImage.src = 'https://static01.nyt.com/' + responseData[this.current_ArtIndex].multimedia[0].url\r\n            resultsPage.style.display = 'block'\r\n            console.log(this.current_ArtIndex)\r\n            console.log('data: ', response.data.response.docs)\r\n    \r\n            head.innerHTML = responseData[this.current_ArtIndex].headline.main\r\n            artAuthor.innerHTML = responseData[this.current_ArtIndex].byline.original\r\n            artPostDate.innerHTML = responseData[this.current_ArtIndex].pub_date\r\n            leadP.innerHTML = responseData[this.current_ArtIndex].abstract + \" \" + responseData[this.current_ArtIndex].lead_paragraph\r\n            artUrl.href = responseData[this.current_ArtIndex].web_url\r\n            \r\n    \r\n        }\r\n        \r\n        displayResults(this.current_ArtIndex)\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\nnew NYT_SearcherAPI()"],"file":"nytAPI.js"}